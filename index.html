<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventario Personal</title>
    <link rel="stylesheet" href="main.css">
</head>
<body>

    <h1>Inventario Personal</h1>
    <p class="verso" id="bibleVerse">Mateo 7:1-5</p>
    <div class="verse-bubble" id="verseBubble">
        <p>“No juzguéis, para que no seáis juzgados. Porque con el juicio con que juzgáis, seréis juzgados, y con la medida con que medís, os será medido. ¿Y por qué miras la paja que está en el ojo de tu hermano, y no echas de ver la viga que está en tu propio ojo? ¿O cómo dirás a tu hermano: Déjame sacar la paja de tu ojo, y he aquí la viga en el ojo tuyo? ¡Hipócrita! saca primero la viga de tu propio ojo, y entonces verás bien para sacar la paja del ojo de tu hermano.(RVR1960)”</p>
    </div>
    
    <div class="section">
        <h2>Instrucciones</h2>
        <p>Califique a Edgar Martinez con toda honestidad y valentía a la hora de calificar. Esto ayudará a Edgar a discernir cómo tiene que cambiar.</p>
        <p>Note que las listas incluyen rasgos positivos y negativos. Dios nos pide no solo despojarnos del pecado, pero ponernos a Cristo y crecer en parecernos a Él. En las áreas negativas usa la misma escala.</p>
        <p class="especial">Asegurate que todas las preguntas esten en azul antes de dar click en "Enviar Respuestas".</p>
        <h2>Escala:</h2>
        <p class="escala">1 = debilidad en el área; 2 = necesita mejorar; 3 = ha mejorado; 4 = satisfactorio / área de Fortaleza; 5 = excelente.</p>
        <p>Ejemplo: “Explota” -> Ponga 1 si explotar es un comportamiento habitual y 4 si es algo en lo que, en la gracia de Dios, no es una lucha.</p> 
    </div>

    <form id="inventarioForm" method="post" autocomplete="off" name="google-sheet" action="https://script.google.com/macros/s/AKfycbzFQXtnHaiZqKNmsr6RTsMrx1MzcVnLJNjFxefvrAUjCnHQgInoiQM86N5BiHAvqjNRxw/exec">
        
        <div id="section1" class="section">
            <h2 class="h2_preguntas">Preguntas: La Persona (Parte 1/6)</h2>
            <!-- Questions will be inserted here -->
            <div class="button-container">
                <button type="button" onclick="showSection('section2')">Siguiente</button>
            </div>
        </div>
        
        <div id="section2" class="section" style="display: none;">
            <p class="escala_preguntas">ESCALA: [1 = debilidad en el área] [2 = necesita mejorar] [3 = ha mejorado] [4 = satisfactorio/área de Fortaleza] [5 = excelente]</p>
            <h2 class="h2_preguntas">Preguntas: Mayordomía de su tiempo (Parte 2/6)</h2>
            <!-- Questions will be inserted here -->
            <div class="button-container">
                <button type="button" onclick="showSection('section1')">Regresar</button>
                <button type="button" onclick="showSection('section3')">Siguiente</button>
            </div>
        </div>

        <div id="section3" class="section" style="display: none;">
            <p class="escala_preguntas">ESCALA: [1 = debilidad en el área] [2 = necesita mejorar] [3 = ha mejorado] [4 = satisfactorio/área de Fortaleza] [5 = excelente]</p>
            <h2 class="h2_preguntas">Preguntas: Mayordomía de las finanzas (Parte 3/6)</h2>
            <!-- Questions will be inserted here -->
            <div class="button-container">
                <button type="button" onclick="showSection('section2')">Regresar</button>
                <button type="button" onclick="showSection('section4')">Siguiente</button>
            </div>
        </div>

        <div id="section4" class="section" style="display: none;">
            <p class="escala_preguntas">ESCALA: [1 = debilidad en el área] [2 = necesita mejorar] [3 = ha mejorado] [4 = satisfactorio/área de Fortaleza] [5 = excelente]</p>
            <h2 class="h2_preguntas">Preguntas: Mayordomía de palabras (Parte 4/6)</h2>
            <!-- Questions will be inserted here -->
            <div class="button-container">
                <button type="button" onclick="showSection('section3')">Regresar</button>
                <button type="button" onclick="showSection('section5')">Siguiente</button>
            </div>
        </div>

        <div id="section5" class="section" style="display: none;">
            <p class="escala_preguntas">ESCALA: [1 = debilidad en el área] [2 = necesita mejorar] [3 = ha mejorado] [4 = satisfactorio/área de Fortaleza] [5 = excelente]</p>
            <h2 class="h2_preguntas">Preguntas: Toma de decisiones (Parte 5/6)</h2>
            <!-- Questions will be inserted here -->
            <div class="button-container">
                <button type="button" onclick="showSection('section4')">Regresar</button>
                <button type="button" onclick="showSection('section6')">Siguiente</button>
            </div>
        </div>

        <div id="section6" class="section" style="display: none;">
            <p class="escala_preguntas">ESCALA: [1 = debilidad en el área] [2 = necesita mejorar] [3 = ha mejorado] [4 = satisfactorio/área de Fortaleza] [5 = excelente]</p>
            <h2 class="h2_preguntas">Preguntas: Situaciones del corazón (Parte 6/6)</h2>
            <h3 class="h3_preguntas">Hacia sí mismo</h3>
            <!-- Questions will be inserted here -->
            <div class="button-container">
                <button type="button" onclick="showSection('section5')">Regresar</button>
                <button type="button" onclick="showSection('section7')">Siguiente</button>
            </div>
        </div>

        <div id="section7" class="section" style="display: none;">
            <p class="escala_preguntas">ESCALA: [1 = debilidad en el área] [2 = necesita mejorar] [3 = ha mejorado] [4 = satisfactorio/área de Fortaleza] [5 = excelente]</p>
            <h2 class="h2_preguntas">Preguntas: Situaciones del corazón (Parte 6/6)</h2>
            <h3 class="h3_preguntas">Hacia otros</h3>
            <!-- Questions will be inserted here -->
            <div class="button-container">
                <button type="button" onclick="showSection('section6')">Regresar</button>
                <button type="submit" name="submit">Enviar Respuestas</button>
            </div>
        </div>
    </form>

    <div class="overlay"></div>
    <div class="dialog" id="loadingDialog">Loading...</div>

    <script>
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            // Show the selected section
            document.getElementById(sectionId).style.display = 'block';
        }

        const questionsData = {
            section1: [
                { name: "admite_equivoca", label: "Admite cuando se equivoca" },
                { name: "analitico", label: "Analítico" }
            ],
            section2: [
                { name: "perezoso", label: "Perezoso" },
                { name: "posterga", label: "Posterga las cosas" }
            ],
            section3: [
                { name: "avaro", label: "Avaro" },
                { name: "codicioso", label: "Codicioso" }
            ],
            section4: [
                { name: "gusta_discutir", label: "Le gusta discutir / ser polémico" },
                { name: "explota", label: "Explota" }
            ],
            section5: [
                { name: "indeciso", label: "Indeciso" },
                { name: "indiferente", label: "Indiferente" }
            ],
            section6: [
                { name: "arrogante", label: "Arrogante" },
                { name: "engreido", label: "Engreído" }
            ],
            section7: [
                { name: "menosprecia", label: "Menosprecia" },
                { name: "amargado", label: "Amargado" }
            ]
        };

        document.addEventListener("DOMContentLoaded", function () {
            Object.keys(questionsData).forEach(sectionId => {
                const section = document.getElementById(sectionId);
                const questions = questionsData[sectionId];

                questions.forEach(question => {
                    const faqDiv = document.createElement('div');
                    faqDiv.classList.add('faq');

                    const button = document.createElement('button');
                    button.type = 'button';
                    button.classList.add('faq-question');
                    button.textContent = question.label;
                    faqDiv.appendChild(button);

                    const answerDiv = document.createElement('div');
                    answerDiv.classList.add('faq-answer');

                    for (let i = 1; i <= 5; i++) {
                        const label = document.createElement('label');
                        label.title = `${i} = ${i === 1 ? 'debilidad en el área' : i === 2 ? 'necesita mejorar' : i === 3 ? 'ha mejorado' : i === 4 ? 'satisfactorio/área de Fortaleza' : 'excelente'}`;
                        const input = document.createElement('input');
                        input.type = 'radio';
                        input.name = question.name;
                        input.value = i;
                        input.required = true;
                        label.appendChild(input);
                        label.append(` ${i}`);
                        answerDiv.appendChild(label);
                    }

                    faqDiv.appendChild(answerDiv);
                    section.insertBefore(faqDiv, section.querySelector('.button-container'));
                });

                document.querySelectorAll('.faq-question').forEach(button => {
                    button.addEventListener('click', () => {
                        const answer = button.nextElementSibling;
                        if (answer.style.display === 'block') {
                            answer.style.display = 'none';
                        } else {
                            answer.style.display = 'block';
                        }
                    });
                });
            });
        });

        const form = document.forms['google-sheet'];

        form.addEventListener('submit', e => {
            e.preventDefault();
            document.querySelector('.overlay').style.display = 'block';
            const loadingDialog = document.getElementById('loadingDialog');
            loadingDialog.style.display = 'block';
            fetch(form.action, { method: 'POST', body: new FormData(form) })
                .then(response => {
                    loadingDialog.textContent = 'Redireccionando!';
                    setTimeout(() => {
                        window.location.href = 'thank_you.html';
                    }, 1000); // Adjust the delay as needed
                })
                .catch(error => {
                    document.querySelector('.overlay').style.display = 'none';
                    loadingDialog.style.display = 'none';
                    console.error('Error!', error.message);
                });
        });
    </script>
    <footer>
        <div class="footer">
            <p>Encuesta para proyecto de mejoria persona para la clase de "Introduccion a la Consejeria" de "The Masters Seminary".</p>
        </div>
    </footer>
    <script src="script.js"></script>
</body>
</html>
